<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动态组件和异步组件</title>
    <script src="https://unpkg.com/vue@next"></script>
</head>

<body>
    <div id="root"></div>
    <script>
        // const app = Vue.createApp({
        //     data() {
        //         return {
        //             currentItem: 'input-item'
        //         }
        //     },
        //     methods: {
        //         handleClick() {
        //             this.currentItem === 'input-item' ? this.currentItem = 'common-item' : this.currentItem = 'input-item'
        //         }
        //     },
        //     template: `
        //     <div>
        //         <input-item v-show="currentItem === 'input-item'"/>
        //         <common-item v-show="currentItem === 'common-item'"/>
        //         <button @click="handleClick">切换</button>
        //     </div>
        //     `
        // })
        // app.component('input-item', {
        //     template: `
        //       <div>
        //         <input/>
        //       </div>
        //     `
        // })
        // app.component('common-item', {
        //     template: `
        //       <div>
        //        Hello world
        //       </div>
        //     `
        // })
        // const vm = app.mount('#root')

        // const app = Vue.createApp({
        //     data() {
        //         return {
        //             currentItem: 'input-item'
        //         }
        //     },
        //     methods: {
        //         handleClick() {
        //             this.currentItem === 'input-item' ? this.currentItem = 'common-item' : this.currentItem = 'input-item'
        //         }
        //     },
        //     template: `
        //     <div>
        //         <component :is="currentItem"/>
        //         <button @click="handleClick">切换</button>
        //     </div>
        //     `
        // })
        // app.component('input-item', {
        //     template: `
        //       <div>
        //         <input/>
        //       </div>
        //     `
        // })
        // app.component('common-item', {
        //     template: `
        //       <div>
        //        Hello world
        //       </div>
        //     `
        // })
        // const vm = app.mount('#root')

        // const app = Vue.createApp({
        //     data() {
        //         return {
        //             currentItem: 'input-item'
        //         }
        //     },
        //     methods: {
        //         handleClick() {
        //             this.currentItem === 'input-item' ? this.currentItem = 'common-item' : this.currentItem = 'input-item'
        //         }
        //     },
        //     template: `
        //     <div>
        //         <keep-alive>
        //             <component :is="currentItem"/>
        //         </keep-alive>
        //         <button @click="handleClick">切换</button>
        //     </div>
        //     `
        // })
        // app.component('input-item', {
        //     template: `
        //       <div>
        //         <input/>
        //       </div>
        //     `
        // })
        // app.component('common-item', {
        //     template: `
        //       <div>
        //        Hello world
        //       </div>
        //     `
        // })
        // const vm = app.mount('#root')
        // const app = Vue.createApp({
        //     template: `
        //     <div>
        //         <common-item/>
        //         <async-common-item/>
        //     </div>
        //     `
        // })
        // app.component('async-common-item', Vue.defineAsyncComponent(() => {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             resolve({
        //                 template: `<div>this is an async component</div>`
        //             })
        //         }, 4000);

        //     })
        // }))
        // app.component('common-item', {
        //     template: `
        //       <div>
        //        Hello world
        //       </div>
        //     `
        // })
        // const vm = app.mount('#root')

        // const app = Vue.createApp({
        //     data(){
        //         return {
        //             count: 1
        //         }
        //     },
        //     template: `
        //     <div @click="count += 1" v-once>
        //         {{count}}
        //     </div>
        //     `
        // })
        // const vm = app.mount('#root')

        // const app = Vue.createApp({
        //     data(){
        //         return {
        //             count: 1
        //         }
        //     },
        //     mounted() {
        //         console.log(this.$refs.count);
        //     },
        //     template: `
        //     <div>
        //         <div ref="count">
        //             {{count}}
        //         </div>
        //     </div>
        //     `
        // })
        // const vm = app.mount('#root')

        // const app = Vue.createApp({
        //     mounted() {
        //         this.$refs.common.sayHello()
        //     },
        //     template: `
        //     <div>
        //         <common-item ref="common"/>
        //     </div>
        //     `
        // })
        // app.component('common-item', {
        //     methods:{
        //         sayHello() {
        //             alert('hello')
        //         }
        //     },
        //     template: `
        //       <div>
        //          Hello world
        //       </div>
        //     `
        // })
        // const vm = app.mount('#root')

        // const app = Vue.createApp({
        //     data() {
        //         return {
        //             count: 1
        //         }
        //     },
        //     template: `
        //     <div>
        //         <child :count="count"/>
        //     </div>
        //     `
        // })
        // app.component('child', {
        //     props:['count'],
        //     template: `
        //       <child-child :count="count">{{count}}</child-child>
        //     `
        // })
        // app.component('child-child', {
        //     props:['count'],
        //     template: `
        //       <div>
        //          {{count}}
        //       </div>
        //     `
        // })
        // const vm = app.mount('#root')

        // const app = Vue.createApp({
        //     data() {
        //         return {
        //             count: 1
        //         }
        //     },
        //     provide:{
        //         count: 1
        //     },
        //     template: `
        //     <div>
        //         <child :count="count"/>
        //     </div>
        //     `
        // })
        // app.component('child', {
        //     props:['count'],
        //     template: `
        //       <child-child :count="count">{{count}}</child-child>
        //     `
        // })
        // app.component('child-child', {
        //     inject:['count'],
        //     template: `
        //       <div>
        //          {{count}}
        //       </div>
        //     `
        // })
        // const vm = app.mount('#root')

        const app = Vue.createApp({
            data() {
                return {
                    count: 1
                }
            },
            provide() {
                return {
                    count: this.count
                }
            },
            template: `
            <div>
                <child :count="count"/>
                <button @click="count += 1">自增</button>
            </div>
            `
        })
        app.component('child', {
            props:['count'],
            template: `
              <child-child :count="count">{{count}}</child-child>
            `
        })
        app.component('child-child', {
            inject:['count'],
            template: `
              <div>
                 {{count}}
              </div>
            `
        })
        const vm = app.mount('#root')
    </script>
</body>

</html>